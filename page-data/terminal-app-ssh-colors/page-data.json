{"componentChunkName":"component---src-templates-blog-post-js","path":"/terminal-app-ssh-colors/","result":{"data":{"site":{"siteMetadata":{"title":"Kevin's Blog"}},"markdownRemark":{"id":"91007ea3-8e4f-53a2-993f-29d780544dc4","excerpt":"You are in your terminal, remoting into a server in your stage\nenvironment. Time to run that script to drop a bunch of database tables\n(isn’t Friday at 4:59 PM…","html":"<p>You are in your terminal, remoting into a server in your stage\nenvironment. Time to run that script to drop a bunch of database tables\n(isn’t Friday at 4:59 PM the best?)!</p>\n<p><em>Sinking Feeling…</em> That was Stage, right? All these terminal tabs look\nthe same!</p>\n<p>Whether you’re running commands on remote machines and want some peace\nof mind or just want a little more swag, adding some color to distinguish\nyour SSH sessions sure is nice.</p>\n<p><strong>Here’s how I got it done on my Mac’s default terminal, Terminal.app.</strong></p>\n<blockquote>\n<p>Note: If you don’t use Terminal.app as your terminal emulator,\nyou could replace all references of running the AppleScript with\nanother script that interfaces with your terminal.</p>\n</blockquote>\n<h2>Set Up</h2>\n<h3>Terminal Settings</h3>\n<p>The terminal has a selection of themes available in the terminal\npreferences.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3784f8bb268d0171e7049c97ba0c4f80/1134b/terminal-preferences.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 91.77215189873418%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAADWUlEQVR42o1UTYvjRhDVYUyYEQxjH2J2Y1tSq1tSS2p92ZLHsuy1Yns+CLtMloWEhHxAIJBrDiHsIZ5DLvm9gaw38nSFao+HHSaBHB6SS9WvXr2qtmYYxlkixFvB+a3vOL/5jrNBeBRBN9Q0N0kYbiI/vI85G+8+5wDO2C1n7C1yaYSQMPKDJvYDCD0uQ9eDwPUgCQUM4wTq2RxGSQpFNgTBfciiWH3DnNDjj9Dv9wOt1+uFtmFuycC4oxZpHGLvEC5lO86c3ShJ1dOjbOfadOcxR32jFtnDtHbMInfMIrt+txtobV0XvsubyeQFRH4gB8+eQ//Zc7D6A1V1uaghz4YQhwKEH0AUCkhEBGkUqVgaxUBNC4hhQrfdDbWW1hLj8ah5/dUNzKuZLEY5DNMMuONCNZ/Ci2oGozQD33EVDlagBXmaPbTPiA3tdntPmE/S5ubbz+D66lrWixqm5VQlpVkCgcchDkLgzFGIghBSEcEwSdUTfcU4s8ie8GNdF54XNNn5Ekkktml+0gNqEciTTB3AllybKjjEhkU1h+n5RMXxN8bpgVDTNLGu8+b3zTcwKQo5HuWqNUw6TNaj7IEQ30dpovz9MPaIcFmNm9tff0Q/JFbFgWAirszFcgXno1wpwbZCz4OvXy/hUBjjTwin1UXzw89/KEKXsoekuprB5XIFl6u12kXf2e/oejxURVD9E0K9pYkonTf157/AJC/koSoCp4hKYh6pwYiAAzNMoIb50O6TlnVdFxmPmpflpbopZGCA1eurNagnU7ialVCuQyjzEip+Aef1BaxXK6UYp/svCnURi6ip609RhcQkpZJSWIwnsCwyqF9lsFysYJXcwPz6JVxdXqkreBjWI8KW3haF7zVfVmNMkrhnJiq0CCyqmTrITHJvAwGP2JByrrz8zylXxfjvn777Hg/fISlnjmQWkbNyKi+WKzmME+kQW7o2lZwymQe+jEMhPcpUDItR05JdpbDVEsUwb968+QLKYixnk3K/JjZVV6wsxmogByUIhsruvcM43me0qq3rodbpdHyH2H8Gjvs+CcW7LE62wyTZ2oaxJYa5tU0L/4kew/jgvT9451L2nprWX51Oh2PLH52cnMTHx8f50dHR6IDT09P/DTx7dnYWI9c/JvzaiWjg7k0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Terminal Preferences\"\n        title=\"\"\n        src=\"/static/3784f8bb268d0171e7049c97ba0c4f80/f058b/terminal-preferences.png\"\n        srcset=\"/static/3784f8bb268d0171e7049c97ba0c4f80/c26ae/terminal-preferences.png 158w,\n/static/3784f8bb268d0171e7049c97ba0c4f80/6bdcf/terminal-preferences.png 315w,\n/static/3784f8bb268d0171e7049c97ba0c4f80/f058b/terminal-preferences.png 630w,\n/static/3784f8bb268d0171e7049c97ba0c4f80/40601/terminal-preferences.png 945w,\n/static/3784f8bb268d0171e7049c97ba0c4f80/78612/terminal-preferences.png 1260w,\n/static/3784f8bb268d0171e7049c97ba0c4f80/1134b/terminal-preferences.png 1470w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>These themes can be really detailed and are what we are going to switch\ndynamically when connecting to different SSH connections. We can use any\nof the default themes here or create our own.</p>\n<p>While we are here, We want to tweak the setting to ensure\n<code class=\"language-text\">New tabs open with: Default Profile</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3cff78b5ca18155dde0071312b113950/74866/settings.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 91.13924050632912%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACg0lEQVR42pVU61LaYBDNWygEEkjI9cv9DozDtUXaKopWy4id2vd/h9PZhSigM21/nEny7e7J2d2TSIvBAFXVR57lryjyHNVwjKoaoCxKjEdjTCdTjlVlhX7VR5ZmB/kF4ijG8nIJKcsLPiBQME1Svu9/2WI0u8Sn2YxJFp8XGA6GTHy5WDJhXUcvpbr5bA7J0HrYQYdtWIj8kBH6IVw/g2vZ8F0PwnYQCI/zdEXBW10Ppm5AU7so0hySKrdRQ1M6cE0bnu3C1AyIoMLXxRKz8QTjixHm4ykG5RBOOIJyUNdpKWidNViIRA81KKg0Wzs0ZFiajiovkYQRQi+A7wiEXghLlDis67ZVtM+biIPomLAOEuje0k0kYYyYRiB8JgxcAWEanEMd1dd2Q/6YkNRRkNQGjmCyyAuYMAkipFHML/FIrfAZlNOR2xyXDts1ujrSKGECz/Eg4gsUcYKMECUcJ0U8N1lhkk49w/Mm0jA+VkjJJm2NNql24XsRhmUfZVagygrkccrKOvux1KhbJjHSIRkFjmepsCo6V/ZKyB6n0Dsa1JbytmVqQdgutxrtFyAsBzdX19hunvD4/QGrb1e4vl4jnTxBld8vkhQe2YYOHcNiIvIitX67usHP7TM2jxvcr+9wf/8D2fT5Y8KPbEOGDsgermDSu9UKv19e8Py0xcP6DuvbB6TTX1Ca1H7774Rsmb1tFFlBkE+RlmOkxYgHTrZwnJDVn86btpycEr5ujp4VDZZXwbcdeDYZ2uNxkDcjP+Bl1Z9dPcPk1DbvILfYZ3WhevL9HgqRzxo7H6py6yhRbe4h/x+ItKS/ja5b0Ls9Bv2KLL23M7du/DOozjFtzCcz/AGWkRMxlPm3nAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Terminal Preferences\"\n        title=\"\"\n        src=\"/static/3cff78b5ca18155dde0071312b113950/f058b/settings.png\"\n        srcset=\"/static/3cff78b5ca18155dde0071312b113950/c26ae/settings.png 158w,\n/static/3cff78b5ca18155dde0071312b113950/6bdcf/settings.png 315w,\n/static/3cff78b5ca18155dde0071312b113950/f058b/settings.png 630w,\n/static/3cff78b5ca18155dde0071312b113950/74866/settings.png 668w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>AppleScript</h3>\n<p>Now, let’s create an AppleScript,\n<code class=\"language-text\">$HOME/Documents/scripts/changeTerminalTheme.scpt</code>,\nthat updates the current Terminal tab’s theme.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">on run argv\n    tell application <span class=\"token string\">\"Terminal\"</span>\n        <span class=\"token keyword\">set</span> defaultTheme to name <span class=\"token keyword\">of</span> <span class=\"token keyword\">default</span> settings\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>count <span class=\"token keyword\">of</span> argv<span class=\"token punctuation\">)</span> is <span class=\"token number\">0</span> then <span class=\"token keyword\">set</span> argv to <span class=\"token punctuation\">{</span>defaultTheme<span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">set</span> current settings <span class=\"token keyword\">of</span> selected tab <span class=\"token keyword\">of</span> front window to settings <span class=\"token function\">set</span> <span class=\"token punctuation\">(</span>item <span class=\"token number\">1</span> <span class=\"token keyword\">of</span> argv<span class=\"token punctuation\">)</span>\n    end tell\nend run</code></pre></div>\n<p>This small script takes the name of any theme we have defined in our\nTerminal preferences, and sets only the active tab to that theme. If\nno theme name is passed, it uses the default theme.</p>\n<p>See our script in action:</p>\n<p align=\"center\">\n  <img width=\"630\" src=\"/13a6f2506c95ce68685a9ca4916866d4/apple-script-demo.gif\">\n</p>\n<p>Progress!</p>\n<h3>SSH Alias</h3>\n<p>Add this alias to your <code class=\"language-text\">~/.bash_aliases</code> and make sure it is sourced\nin your <code class=\"language-text\">~/.zshrc</code> (or <code class=\"language-text\">~/.bashrc</code>) with <code class=\"language-text\">source $HOME/.bash_aliases</code>.\nThis switches the terminal back to our default theme when an SSH\nconnection closes.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token shebang important\">#! /bin/bash</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function-name function\">ssh_alias</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin class-name\">trap</span> <span class=\"token string\">\"osascript ~/Documents/scripts/changeTerminalTheme.scpt\"</span> INT EXIT\n  <span class=\"token function\">ssh</span> <span class=\"token string\">\"<span class=\"token variable\">$@</span>\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">ssh</span><span class=\"token operator\">=</span>ssh_alias</code></pre></div>\n<h3>SSH Config</h3>\n<ol>\n<li>Edit <code class=\"language-text\">/etc/ssh/ssh_config</code> and ensure <code class=\"language-text\">PermitLocalCommand yes</code> is under your <code class=\"language-text\">Host *</code> config.</li>\n<li>Edit <code class=\"language-text\">~/.ssh/config</code> and define the themes for any given host:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">Host your.production.host\n   User root\n   LocalCommand osascript ~/Documents/scripts/changeTerminalTheme.scpt <span class=\"token string\">\"Solid Colors\"</span></code></pre></div>\n<p>Replace <code class=\"language-text\">Solid Colors</code> here with any theme defined in your terminal\npreferences.</p>\n<h3>We’re Done!</h3>\n<p>In this demo, I open up a connection to a server I have defined to use\nthe <code class=\"language-text\">Ocean</code> theme. I then open a new tab which starts with my default\n<code class=\"language-text\">Basic</code> theme but changes when I SSH into a server defined to use the\n<code class=\"language-text\">Other</code> theme. I then exit the SSH connections, and we can see each tab\nswitching back to the default <code class=\"language-text\">Basic</code> theme.</p>\n<p align=\"center\">\n  <img width=\"630\" src=\"/1ec1cd7128449a9c45f138d8ddd7d0c8/final-demo.gif\">\n</p>","frontmatter":{"title":"Switch Terminal.app Theme On SSH Connection","date":"February 11, 2021","description":"Change Terminal.app Themes automatically when connecting to different SSH hosts."}},"previous":null,"next":null},"pageContext":{"id":"91007ea3-8e4f-53a2-993f-29d780544dc4","previousPostId":null,"nextPostId":null}},"staticQueryHashes":["230163734","2841359383"],"slicesMap":{}}