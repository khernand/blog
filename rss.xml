<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Kevin Hernandez's Blog RSS Feed]]></title><description><![CDATA[A personal blog for random things.]]></description><link>https://khernand.com</link><generator>GatsbyJS</generator><lastBuildDate>Wed, 28 Jun 2023 00:49:55 GMT</lastBuildDate><item><title><![CDATA[Switch Terminal.app Theme On SSH Connection]]></title><description><![CDATA[You are in your terminal, remoting into a server in your stage
environment. Time to run that script to drop a bunch of database tables
(isn…]]></description><link>https://khernand.com/terminal-app-ssh-colors/</link><guid isPermaLink="false">https://khernand.com/terminal-app-ssh-colors/</guid><pubDate>Thu, 11 Feb 2021 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;You are in your terminal, remoting into a server in your stage
environment. Time to run that script to drop a bunch of database tables
(isn’t Friday at 4:59 PM the best?)!&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Sinking Feeling…&lt;/em&gt; That was Stage, right? All these terminal tabs look
the same!&lt;/p&gt;
&lt;p&gt;Whether you’re running commands on remote machines and want some peace
of mind or just want a little more swag, adding some color to distinguish
your SSH sessions sure is nice.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Here’s how I got it done on my Mac’s default terminal, Terminal.app.&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: If you don’t use Terminal.app as your terminal emulator,
you could replace all references of running the AppleScript with
another script that interfaces with your terminal.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Set Up&lt;/h2&gt;
&lt;h3&gt;Terminal Settings&lt;/h3&gt;
&lt;p&gt;The terminal has a selection of themes available in the terminal
preferences.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3784f8bb268d0171e7049c97ba0c4f80/1134b/terminal-preferences.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 91.77215189873418%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAADWUlEQVR42o1UTYvjRhDVYUyYEQxjH2J2Y1tSq1tSS2p92ZLHsuy1Yns+CLtMloWEhHxAIJBrDiHsIZ5DLvm9gaw38nSFao+HHSaBHB6SS9WvXr2qtmYYxlkixFvB+a3vOL/5jrNBeBRBN9Q0N0kYbiI/vI85G+8+5wDO2C1n7C1yaYSQMPKDJvYDCD0uQ9eDwPUgCQUM4wTq2RxGSQpFNgTBfciiWH3DnNDjj9Dv9wOt1+uFtmFuycC4oxZpHGLvEC5lO86c3ShJ1dOjbOfadOcxR32jFtnDtHbMInfMIrt+txtobV0XvsubyeQFRH4gB8+eQ//Zc7D6A1V1uaghz4YQhwKEH0AUCkhEBGkUqVgaxUBNC4hhQrfdDbWW1hLj8ah5/dUNzKuZLEY5DNMMuONCNZ/Ci2oGozQD33EVDlagBXmaPbTPiA3tdntPmE/S5ubbz+D66lrWixqm5VQlpVkCgcchDkLgzFGIghBSEcEwSdUTfcU4s8ie8GNdF54XNNn5Ekkktml+0gNqEciTTB3AllybKjjEhkU1h+n5RMXxN8bpgVDTNLGu8+b3zTcwKQo5HuWqNUw6TNaj7IEQ30dpovz9MPaIcFmNm9tff0Q/JFbFgWAirszFcgXno1wpwbZCz4OvXy/hUBjjTwin1UXzw89/KEKXsoekuprB5XIFl6u12kXf2e/oejxURVD9E0K9pYkonTf157/AJC/koSoCp4hKYh6pwYiAAzNMoIb50O6TlnVdFxmPmpflpbopZGCA1eurNagnU7ialVCuQyjzEip+Aef1BaxXK6UYp/svCnURi6ip609RhcQkpZJSWIwnsCwyqF9lsFysYJXcwPz6JVxdXqkreBjWI8KW3haF7zVfVmNMkrhnJiq0CCyqmTrITHJvAwGP2JByrrz8zylXxfjvn777Hg/fISlnjmQWkbNyKi+WKzmME+kQW7o2lZwymQe+jEMhPcpUDItR05JdpbDVEsUwb968+QLKYixnk3K/JjZVV6wsxmogByUIhsruvcM43me0qq3rodbpdHyH2H8Gjvs+CcW7LE62wyTZ2oaxJYa5tU0L/4kew/jgvT9451L2nprWX51Oh2PLH52cnMTHx8f50dHR6IDT09P/DTx7dnYWI9c/JvzaiWjg7k0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Terminal Preferences&quot;
        title=&quot;&quot;
        src=&quot;/static/3784f8bb268d0171e7049c97ba0c4f80/f058b/terminal-preferences.png&quot;
        srcset=&quot;/static/3784f8bb268d0171e7049c97ba0c4f80/c26ae/terminal-preferences.png 158w,
/static/3784f8bb268d0171e7049c97ba0c4f80/6bdcf/terminal-preferences.png 315w,
/static/3784f8bb268d0171e7049c97ba0c4f80/f058b/terminal-preferences.png 630w,
/static/3784f8bb268d0171e7049c97ba0c4f80/40601/terminal-preferences.png 945w,
/static/3784f8bb268d0171e7049c97ba0c4f80/78612/terminal-preferences.png 1260w,
/static/3784f8bb268d0171e7049c97ba0c4f80/1134b/terminal-preferences.png 1470w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;These themes can be really detailed and are what we are going to switch
dynamically when connecting to different SSH connections. We can use any
of the default themes here or create our own.&lt;/p&gt;
&lt;p&gt;While we are here, We want to tweak the setting to ensure
&lt;code class=&quot;language-text&quot;&gt;New tabs open with: Default Profile&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3cff78b5ca18155dde0071312b113950/74866/settings.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 91.13924050632912%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACg0lEQVR42pVU61LaYBDNWygEEkjI9cv9DozDtUXaKopWy4id2vd/h9PZhSigM21/nEny7e7J2d2TSIvBAFXVR57lryjyHNVwjKoaoCxKjEdjTCdTjlVlhX7VR5ZmB/kF4ijG8nIJKcsLPiBQME1Svu9/2WI0u8Sn2YxJFp8XGA6GTHy5WDJhXUcvpbr5bA7J0HrYQYdtWIj8kBH6IVw/g2vZ8F0PwnYQCI/zdEXBW10Ppm5AU7so0hySKrdRQ1M6cE0bnu3C1AyIoMLXxRKz8QTjixHm4ykG5RBOOIJyUNdpKWidNViIRA81KKg0Wzs0ZFiajiovkYQRQi+A7wiEXghLlDis67ZVtM+biIPomLAOEuje0k0kYYyYRiB8JgxcAWEanEMd1dd2Q/6YkNRRkNQGjmCyyAuYMAkipFHML/FIrfAZlNOR2xyXDts1ujrSKGECz/Eg4gsUcYKMECUcJ0U8N1lhkk49w/Mm0jA+VkjJJm2NNql24XsRhmUfZVagygrkccrKOvux1KhbJjHSIRkFjmepsCo6V/ZKyB6n0Dsa1JbytmVqQdgutxrtFyAsBzdX19hunvD4/QGrb1e4vl4jnTxBld8vkhQe2YYOHcNiIvIitX67usHP7TM2jxvcr+9wf/8D2fT5Y8KPbEOGDsgermDSu9UKv19e8Py0xcP6DuvbB6TTX1Ca1H7774Rsmb1tFFlBkE+RlmOkxYgHTrZwnJDVn86btpycEr5ujp4VDZZXwbcdeDYZ2uNxkDcjP+Bl1Z9dPcPk1DbvILfYZ3WhevL9HgqRzxo7H6py6yhRbe4h/x+ItKS/ja5b0Ls9Bv2KLL23M7du/DOozjFtzCcz/AGWkRMxlPm3nAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Terminal Preferences&quot;
        title=&quot;&quot;
        src=&quot;/static/3cff78b5ca18155dde0071312b113950/f058b/settings.png&quot;
        srcset=&quot;/static/3cff78b5ca18155dde0071312b113950/c26ae/settings.png 158w,
/static/3cff78b5ca18155dde0071312b113950/6bdcf/settings.png 315w,
/static/3cff78b5ca18155dde0071312b113950/f058b/settings.png 630w,
/static/3cff78b5ca18155dde0071312b113950/74866/settings.png 668w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;AppleScript&lt;/h3&gt;
&lt;p&gt;Now, let’s create an AppleScript,
&lt;code class=&quot;language-text&quot;&gt;$HOME/Documents/scripts/changeTerminalTheme.scpt&lt;/code&gt;,
that updates the current Terminal tab’s theme.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;on run argv
    tell application &lt;span class=&quot;token string&quot;&gt;&quot;Terminal&quot;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;set&lt;/span&gt; defaultTheme to name &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; settings
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;count &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; argv&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; is &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; then &lt;span class=&quot;token keyword&quot;&gt;set&lt;/span&gt; argv to &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;defaultTheme&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;set&lt;/span&gt; current settings &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; selected tab &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; front window to settings &lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; argv&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    end tell
end run&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This small script takes the name of any theme we have defined in our
Terminal preferences, and sets only the active tab to that theme. If
no theme name is passed, it uses the default theme.&lt;/p&gt;
&lt;p&gt;See our script in action:&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;
  &lt;img width=&quot;630&quot; src=&quot;/13a6f2506c95ce68685a9ca4916866d4/apple-script-demo.gif&quot;&gt;
&lt;/p&gt;
&lt;p&gt;Progress!&lt;/p&gt;
&lt;h3&gt;SSH Alias&lt;/h3&gt;
&lt;p&gt;Add this alias to your &lt;code class=&quot;language-text&quot;&gt;~/.bash_aliases&lt;/code&gt; and make sure it is sourced
in your &lt;code class=&quot;language-text&quot;&gt;~/.zshrc&lt;/code&gt; (or &lt;code class=&quot;language-text&quot;&gt;~/.bashrc&lt;/code&gt;) with &lt;code class=&quot;language-text&quot;&gt;source $HOME/.bash_aliases&lt;/code&gt;.
This switches the terminal back to our default theme when an SSH
connection closes.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token shebang important&quot;&gt;#! /bin/bash&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function-name function&quot;&gt;ssh_alias&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token builtin class-name&quot;&gt;trap&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;osascript ~/Documents/scripts/changeTerminalTheme.scpt&quot;&lt;/span&gt; INT EXIT
  &lt;span class=&quot;token function&quot;&gt;ssh&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$@&lt;/span&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token builtin class-name&quot;&gt;alias&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;ssh&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;ssh_alias&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;SSH Config&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Edit &lt;code class=&quot;language-text&quot;&gt;/etc/ssh/ssh_config&lt;/code&gt; and ensure &lt;code class=&quot;language-text&quot;&gt;PermitLocalCommand yes&lt;/code&gt; is under your &lt;code class=&quot;language-text&quot;&gt;Host *&lt;/code&gt; config.&lt;/li&gt;
&lt;li&gt;Edit &lt;code class=&quot;language-text&quot;&gt;~/.ssh/config&lt;/code&gt; and define the themes for any given host:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;Host your.production.host
   User root
   LocalCommand osascript ~/Documents/scripts/changeTerminalTheme.scpt &lt;span class=&quot;token string&quot;&gt;&quot;Solid Colors&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Replace &lt;code class=&quot;language-text&quot;&gt;Solid Colors&lt;/code&gt; here with any theme defined in your terminal
preferences.&lt;/p&gt;
&lt;h3&gt;We’re Done!&lt;/h3&gt;
&lt;p&gt;In this demo, I open up a connection to a server I have defined to use
the &lt;code class=&quot;language-text&quot;&gt;Ocean&lt;/code&gt; theme. I then open a new tab which starts with my default
&lt;code class=&quot;language-text&quot;&gt;Basic&lt;/code&gt; theme but changes when I SSH into a server defined to use the
&lt;code class=&quot;language-text&quot;&gt;Other&lt;/code&gt; theme. I then exit the SSH connections, and we can see each tab
switching back to the default &lt;code class=&quot;language-text&quot;&gt;Basic&lt;/code&gt; theme.&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;
  &lt;img width=&quot;630&quot; src=&quot;/1ec1cd7128449a9c45f138d8ddd7d0c8/final-demo.gif&quot;&gt;
&lt;/p&gt;</content:encoded></item></channel></rss>